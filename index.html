<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Full-Stack App (Student Build)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="style.css" rel="stylesheet" />
</head>
<body class="not-authenticated">

  <!-- ===================== NAVBAR ===================== -->
  <nav class="navbar navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="#/">Full-Stack App</a>
    <div class="d-flex align-items-center gap-3">

      <!-- Visible only when NOT logged in -->
      <a href="#/login" class="nav-link text-white role-logged-out">Login</a>
      <a href="#/register" class="nav-link text-white role-logged-out">Register</a>

      <!-- Visible only when logged in -->
      <div class="dropdown role-logged-in">
        <button class="btn btn-secondary dropdown-toggle" id="userDropdownBtn" data-bs-toggle="dropdown">
          User
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#/profile">Profile</a></li>
          <li><a class="dropdown-item role-admin" href="#/employees">Employees</a></li>
          <li><a class="dropdown-item role-admin" href="#/accounts">Accounts</a></li>
          <li><a class="dropdown-item role-admin" href="#/departments">Departments</a></li>
          <li><a class="dropdown-item" href="#/requests">My Requests</a></li>
          <li><hr class="dropdown-divider" /></li>
          <li><a class="dropdown-item text-danger" href="#" id="logoutBtn">Logout</a></li>
        </ul>
      </div>

    </div>
  </nav>

  <!-- ===================== TOAST ===================== -->
  <div id="toastContainer" style="position:fixed;top:70px;right:20px;z-index:9999;"></div>

  <!-- ===================== MAIN ===================== -->
  <main class="container py-4">

    <!-- HOME PAGE -->
    <section id="home-page" class="page">
      <h1>Welcome to Full-Stack App</h1>
      <p class="text-muted">A static prototype before backend integration. Simulates:</p>
      <ul>
        <li>Email registration + fake verification</li>
        <li>Login with JWT-like token simulation</li>
        <li>Role-based UI (Admin / User)</li>
        <li>CRUD for Employees, Departments, Requests</li>
      </ul>
      <div class="alert alert-info">
        ⚠️ <strong>Note:</strong> All data is stored in <code>localStorage</code>.
      </div>
      <a href="#/register" class="btn btn-primary">Get Started →</a>
    </section>

    <!-- REGISTER PAGE -->
    <section id="register-page" class="page">
      <h2>Register Account</h2>
      <div id="register-error" class="alert alert-danger d-none"></div>
      <div class="mb-3">
        <label class="form-label">First Name</label>
        <input type="text" id="reg-firstname" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Last Name</label>
        <input type="text" id="reg-lastname" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" id="reg-email" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" id="reg-password" class="form-control" />
      </div>
      <button class="btn btn-primary" id="registerBtn">Sign Up</button>
      <a href="#/login" class="btn btn-secondary ms-2">Cancel</a>
    </section>

    <!-- VERIFY EMAIL PAGE -->
    <section id="verify-email-page" class="page">
      <h2>Verify Your Email</h2>
      <div id="verify-message" class="alert alert-success"></div>
      <p>For demo purposes, click below to simulate verification:</p>
      <button class="btn btn-success" id="simulateVerifyBtn">✅ Simulate Email Verification</button>
      <a href="#/login" class="btn btn-secondary ms-2">Go to Login</a>
    </section>

    <!-- LOGIN PAGE -->
    <section id="login-page" class="page">
      <div id="login-success" class="alert alert-success d-none"></div>
      <h2>Login</h2>
      <div id="login-error" class="alert alert-danger d-none"></div>
      <div class="mb-3">
        <label class="form-label">Email</label>
        <input type="email" id="login-email" class="form-control" />
      </div>
      <div class="mb-3">
        <label class="form-label">Password</label>
        <input type="password" id="login-password" class="form-control" />
      </div>
      <button class="btn btn-primary" id="loginBtn">Login</button>
      <a href="#/" class="btn btn-secondary ms-2">Cancel</a>
    </section>

    <!-- PROFILE PAGE -->
    <section id="profile-page" class="page">
      <h2>My Profile</h2>
      <div class="card p-3" id="profile-info"></div>
    </section>

    <!-- EMPLOYEES PAGE (admin) -->
    <section id="employees-page" class="page">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Employees</h2>
        <button class="btn btn-success" id="showAddEmployeeFormBtn">+ Add Employee</button>
      </div>
      <table class="table table-bordered">
        <thead><tr><th>ID</th><th>Name</th><th>Position</th><th>Dept</th><th>Actions</th></tr></thead>
        <tbody id="employees-table-body"></tbody>
      </table>
      <!-- Employee Form -->
      <div id="employee-form-section" class="card p-3 d-none">
        <h5 id="employee-form-title">Add/Edit Employee</h5>
        <input type="hidden" id="emp-edit-id" />
        <div class="mb-2">
          <label class="form-label">Employee ID</label>
          <input type="text" id="emp-id" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">User Email</label>
          <input type="text" id="emp-email" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Position</label>
          <input type="text" id="emp-position" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Department</label>
          <select id="emp-dept" class="form-select"></select>
        </div>
        <div class="mb-2">
          <label class="form-label">Hire Date</label>
          <input type="date" id="emp-hiredate" class="form-control" />
        </div>
        <button class="btn btn-primary" id="saveEmployeeBtn">Save</button>
        <button class="btn btn-secondary ms-2" id="cancelEmployeeBtn">Cancel</button>
      </div>
    </section>

    <!-- DEPARTMENTS PAGE (admin) -->
    <section id="departments-page" class="page">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Departments</h2>
        <button class="btn btn-success" id="showAddDeptFormBtn">+ Add Department</button>
      </div>
      <table class="table table-bordered">
        <thead><tr><th>Name</th><th>Description</th><th>Actions</th></tr></thead>
        <tbody id="departments-table-body"></tbody>
      </table>
      <!-- Department Form -->
      <div id="dept-form-section" class="card p-3 d-none">
        <h5 id="dept-form-title">Add/Edit Department</h5>
        <input type="hidden" id="dept-edit-id" />
        <div class="mb-2">
          <label class="form-label">Name</label>
          <input type="text" id="dept-name" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Description</label>
          <input type="text" id="dept-description" class="form-control" />
        </div>
        <button class="btn btn-primary" id="saveDeptBtn">Save</button>
        <button class="btn btn-secondary ms-2" id="cancelDeptBtn">Cancel</button>
      </div>
    </section>

    <!-- ACCOUNTS PAGE (admin) -->
    <section id="accounts-page" class="page">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Accounts</h2>
        <button class="btn btn-success" id="showAddAccountFormBtn">+ Add Account</button>
      </div>
      <table class="table table-bordered">
        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Verified</th><th>Actions</th></tr></thead>
        <tbody id="accounts-table-body"></tbody>
      </table>
      <!-- Account Form -->
      <div id="account-form-section" class="card p-3 d-none">
        <h5 id="account-form-title">Add/Edit Account</h5>
        <input type="hidden" id="acc-edit-id" />
        <div class="mb-2">
          <label class="form-label">First Name</label>
          <input type="text" id="acc-firstname" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Last Name</label>
          <input type="text" id="acc-lastname" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Email</label>
          <input type="email" id="acc-email" class="form-control" />
        </div>
        <div class="mb-2" id="acc-password-field">
          <label class="form-label">Password</label>
          <input type="password" id="acc-password" class="form-control" />
        </div>
        <div class="mb-2">
          <label class="form-label">Role</label>
          <select id="acc-role" class="form-select">
            <option value="user">User</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div class="mb-2 form-check">
          <input type="checkbox" id="acc-verified" class="form-check-input" />
          <label class="form-check-label" for="acc-verified">Verified</label>
        </div>
        <button class="btn btn-primary" id="saveAccountBtn">Save</button>
        <button class="btn btn-secondary ms-2" id="cancelAccountBtn">Cancel</button>
      </div>
    </section>

    <!-- REQUESTS PAGE -->
    <section id="requests-page" class="page">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>My Requests</h2>
        <button class="btn btn-success" id="openRequestModalBtn">+ New Request</button>
      </div>
      <div id="requests-empty" class="d-none">
        <p>You have no requests yet.</p>
        <button class="btn btn-success" id="openRequestModalBtn2">Create One</button>
      </div>
      <table class="table table-bordered" id="requests-table">
        <thead><tr><th>Date</th><th>Type</th><th>Items</th><th>Status</th></tr></thead>
        <tbody id="requests-table-body"></tbody>
      </table>
    </section>

  </main>

  <!-- ===================== REQUEST MODAL ===================== -->
  <div class="modal fade" id="requestModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">New Request</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">Type</label>
            <select id="request-type" class="form-select">
              <option value="Equipment">Equipment</option>
              <option value="Leave">Leave</option>
              <option value="Resources">Resources</option>
            </select>
          </div>
          <label class="form-label">Items</label>
          <div id="request-items-container"></div>
          <button class="btn btn-sm btn-outline-primary mt-2" id="addItemBtn">+ Add Item</button>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary" id="submitRequestBtn">Submit Request</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>